# 🏢 厂商审核功能使用指南

## 📋 功能概述

审核管理面板现已支持**游戏审核**和**厂商审核**两大功能模块，实现完整的平台审核管理。

---

## 🎯 快速访问

| 页面 | URL | 功能 |
|------|-----|------|
| 🔍 审核管理面板 | `http://localhost:3000/review_tool/review.html` | 游戏 + 厂商审核 |
| 📄 厂商材料提交 | `http://localhost:3000/cp-materials` | 提交厂商认证材料 |
| 🧪 测试工具 | `http://localhost:3000/test-cp-material.html` | 快速添加测试数据 |

---

## 🏗️ 厂商审核状态流程

```
┌─────────────────────────────────────────────────────┐
│              厂商材料审核生命周期                      │
└─────────────────────────────────────────────────────┘

  1️⃣ 创建草稿 (Draft - 0)
     ↓
  📝 厂商填写材料 → 自动保存
     ↓
     │ 点击 "Submit for Review"
     ↓
  2️⃣ 提交审核 (Reviewing - 1)
     ↓
  🟡 等待管理员审核
     ↓
     ├──────────────┬──────────────┐
     │              │              │
     ↓              ↓              ↓
  3️⃣ 审核通过    审核拒绝        (保持审核中)
     ↓              ↓
  ✅ Approved    ❌ Rejected
  (状态 2)       (状态 3)
     │              │
     │              └→ 可重新提交
     │
     └→ 获得平台权限
```

---

## 📊 审核状态说明

| 状态值 | 状态名称 | 说明 | 颜色 | 可操作 |
|--------|---------|------|------|--------|
| `0` | Draft 草稿 | 正在编辑，未提交 | 🔵 蓝色 | 编辑、提交审核 |
| `1` | Reviewing 审核中 | 已提交，等待审核 | 🟡 黄色 | 审核通过、审核拒绝 |
| `2` | Approved 已通过 | 审核通过，已认证 | ✅ 绿色 | 查看详情 |
| `3` | Rejected 已拒绝 | 审核未通过 | ❌ 红色 | 查看备注、重新提交 |

---

## 🚀 快速测试

### 方法 1: 使用测试工具（推荐）

```bash
# 访问测试工具
http://localhost:3000/test-cp-material.html
```

**操作步骤**:
1. 点击 "🟡 添加待审核厂商"
2. 打开审核管理面板
3. 在"厂商审核统计"部分查看数据
4. 点击 "✅ 审核通过" 或 "❌ 拒绝审核"

---

### 方法 2: 手动添加数据

在浏览器控制台（F12）粘贴运行：

```javascript
// 添加待审核厂商
localStorage.setItem('cp_material_form_data', JSON.stringify({
    cpName: "优秀游戏工作室",
    businessLicense: "9876543210ZYXWVU",
    website: "https://awesome-games.com",
    introduction: "专注手机游戏开发的工作室，5年经验，发布过10款游戏",
    cpIcon: "",
    contactEmail: "admin@awesome-games.com",
    contactPhone: "+86 188-1234-5678",
    mailingAddress: "上海市浦东新区游戏创业园区A座",
    files: [
        { name: "营业执照副本.pdf", url: "license.pdf", size: 512000 },
        { name: "税务登记证.pdf", url: "tax.pdf", size: 256000 }
    ],
    submitted: true,
    submittedAt: Date.now(),
    reviewStatus: 1  // 1 = 审核中
}));

location.reload();
```

---

## 🔍 审核管理面板功能

### 1. 厂商审核统计

显示4个统计卡片：

```
┌─────────┬─────────┬─────────┬─────────┐
│  Draft  │Reviewing│Approved │Rejected │
│   🔵    │   🟡    │   ✅    │   ❌    │
└─────────┴─────────┴─────────┴─────────┘
```

### 2. 厂商材料卡片

显示内容：
- 📝 厂商名称
- 📋 营业执照号
- 🌐 官网
- ✉️ 联系邮箱
- 📞 联系电话
- 📍 邮寄地址
- 💬 公司介绍
- 📎 上传文件数量
- 🕒 提交时间
- 💡 审核备注（如有）

### 3. 审核操作

**审核中状态显示的按钮**：
- ✅ **审核通过** - 状态变为"已通过"
- ❌ **拒绝审核** - 状态变为"已拒绝"，必须填写拒绝原因
- 👁️ **查看详情** - 弹窗显示所有详细信息

**其他状态显示的按钮**：
- 👁️ **查看详情** - 查看厂商完整信息

---

## 💡 审核操作示例

### 审核通过流程

1. 在审核面板找到"审核中"的厂商
2. 查看厂商信息是否完整
3. 点击 "✅ 审核通过" 按钮
4. 输入审核备注（可选）
5. 确认后状态变为"已通过"（绿色）

### 拒绝审核流程

1. 在审核面板找到"审核中"的厂商
2. 发现材料不符合要求
3. 点击 "❌ 拒绝审核" 按钮
4. 输入拒绝原因（必填）
5. 确认后状态变为"已拒绝"（红色）

---

## 📁 数据结构

### localStorage 键名

```typescript
'cp_material_form_data'  // 厂商材料数据
```

### 数据格式

```typescript
{
  cpName: string              // 厂商名称
  businessLicense: string     // 营业执照号
  website: string             // 官网
  introduction: string        // 公司介绍
  cpIcon: string              // 公司图标 (base64)
  contactEmail: string        // 联系邮箱
  contactPhone: string        // 联系电话
  mailingAddress: string      // 邮寄地址
  files: Array<{              // 上传的文件
    name: string
    url: string
    size: number
  }>
  submitted: boolean          // 是否已提交
  submittedAt?: number       // 提交时间戳
  reviewStatus: 0 | 1 | 2 | 3  // 审核状态
  reviewComment?: string      // 审核备注
}
```

---

## 🧪 完整测试流程

### 1. 添加测试数据

访问：`http://localhost:3000/test-cp-material.html`

点击 "🟡 添加待审核厂商"

### 2. 打开审核面板

访问：`http://localhost:3000/review_tool/review.html`

**应该看到**：
- ✅ 厂商审核统计：Reviewing = 1
- ✅ 厂商材料卡片（黄色边框）
- ✅ 审核通过/拒绝按钮

### 3. 执行审核操作

**测试审核通过**：
1. 点击 "✅ 审核通过"
2. 输入备注（可选）："材料齐全，审核通过"
3. 确认
4. 卡片变为绿色边框，显示"已通过"

**测试拒绝审核**：
1. 重新添加待审核厂商
2. 点击 "❌ 拒绝审核"
3. 输入拒绝原因（必填）："营业执照不清晰"
4. 确认
5. 卡片变为红色边框，显示"已拒绝"

### 4. 验证状态同步

访问：`http://localhost:3000/cp-materials`

**应该看到**：
- ✅ 页面顶部显示审核状态徽章
- ✅ 表单锁定（已提交状态）
- ✅ 显示审核备注

---

## 🎨 UI 设计特点

### 统计卡片

```
🔵 Draft     - 蓝色 (#17a2b8)
🟡 Reviewing - 黄色 (#ffc107)
✅ Approved  - 绿色 (#28a745)
❌ Rejected  - 红色 (#dc3545)
```

### 厂商卡片样式

- **草稿**: 蓝色左边框 + 浅蓝背景
- **审核中**: 黄色左边框 + 浅黄背景
- **已通过**: 绿色左边框 + 浅绿背景
- **已拒绝**: 红色左边框 + 浅红背景

### 操作按钮

- ✅ **审核通过**: 绿色按钮
- ❌ **拒绝审核**: 红色按钮
- 👁️ **查看详情**: 边框按钮

---

## 📝 审核建议

### 审核通过的标准

✅ 营业执照清晰完整
✅ 公司信息真实有效
✅ 联系方式可用
✅ 上传文件齐全
✅ 公司介绍详细

### 拒绝审核的常见原因

❌ 营业执照不清晰
❌ 信息不完整
❌ 联系方式无效
❌ 缺少必要文件
❌ 公司介绍过于简单

---

## 🔗 相关链接

- 🎮 [游戏审核指南](public/review_tool/REVIEW_GUIDE.md)
- 📖 [系统文档](GAME_MANAGEMENT_SYSTEM.md)
- 🚀 [快速开始](QUICK_START.md)
- 📁 [文件位置说明](FILE_LOCATIONS.md)

---

## 🎉 总结

现在审核管理面板支持：

1. ✅ **游戏审核** - 草稿、审核中、已发布
2. ✅ **厂商审核** - 草稿、审核中、已通过、已拒绝
3. ✅ **统一UI** - 蓝色主题，风格一致
4. ✅ **实时更新** - 每5秒自动刷新
5. ✅ **批量操作** - 支持批量审核游戏

**厂商审核功能已就绪！** 🎉

